let hour,minute,second,year,month,day,currentDay,timeOffset,timezoneText,timeFormat="12-hour";const hourHTML=document.querySelector(".hour_"),minuteHTML=document.querySelector(".minute_"),secondHTML=document.querySelector(".second_"),monthDayYearHTML=document.querySelector("._month-day-year"),currentDayHTML=document.querySelector("._current-day"),hourHand=document.querySelector(".hour-hand__"),minuteHand=document.querySelector(".minute-hand__"),secondHand=document.querySelector(".second-hand__"),pmAm=document.querySelector(".pm-am_"),selectTimezone=document.querySelector("._timezone"),applyButton=document.querySelector("._apply-button"),twelveHourFormat=document.querySelector("._time-format").children[0],twentyFourHourFormat=document.querySelector("._time-format").children[1],daylightSavingIcon=document.querySelector("._daylight-saving");function setTime(){let e=moment.utc().utcOffset(`${timeOffset}`);hour=e.hour(),minute=e.minute(),second=e.second(),year=e.year(),month=e.month(),day=e.date(),currentDay=e.day(),"12-hour"==timeFormat&&hour>=13&&(hour-=12);let t=["January","February","March","April","May","June","July","August","September","October","November","December"];hourHTML.innerText=hour,minuteHTML.innerText=minute,secondHTML.innerText=second,monthDayYearHTML.innerText=`${t[month]} ${day}, ${year}`,currentDayHTML.innerText=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][currentDay];let n=second/60,o=(n+minute)/60,r=(o+e.hour())/12;secondHand.style.transform=`rotate(${360*n+90+360*minute}deg)`,minuteHand.style.transform=`rotate(${360*o+90}deg)`,hourHand.style.transform=`rotate(${360*r+90}deg)`,"12-hour"==timeFormat&&0==hour||-12==hour?hourHTML.innerText="12":hour<10&&(hourHTML.innerText=`0${hour}`),minute<10&&(minuteHTML.innerText=`0${minute}`),second<10&&(secondHTML.innerText=`0${second}`),day<10&&(monthDayYearHTML.innerText=`${t[month]} 0${day}, ${year}`),"12-hour"==timeFormat?(e.hour()>=12?pmAm.innerText="PM":e.hour()>=0&&(pmAm.innerText="AM"),pmAm.style.display="inline"):pmAm.style.display="none",document.querySelector(".offset_").innerText=`(${timeOffset})`}function setTimezone(e){let t="00",n=selectTimezone.value;selectTimezone.options[selectTimezone.selectedIndex].dataset.dst?daylightSavingIcon.style.opacity=1:daylightSavingIcon.style.opacity=.6,n.includes(".5")?(t="30",n=n.slice(0,n.length-2)):n.includes(".75")&&(t="45",n=n.slice(0,n.length-3)),n>=10?n=`+${n}`:n>=0?n=`+0${n}`:n<=-10?n=`-${n.slice(1)}`:n<0&&(n=`-0${n.slice(1)}`),timeOffset=`${n}:${t}`,setTime(),saveTimezone(selectTimezone.options[selectTimezone.selectedIndex].innerText)}function setFormat(){"12-hour"==this.innerText?(twentyFourHourFormat.dataset.selected="false",twelveHourFormat.dataset.selected="true",timeFormat="12-hour",setTime()):"24-hour"==this.innerText&&(twelveHourFormat.dataset.selected="false",twentyFourHourFormat.dataset.selected="true",timeFormat="24-hour",setTime())}function loadTimezoneOptions(){fetch("./assets/timezones.min.json").then(e=>e.json()).then(e=>e.forEach(e=>{let t=document.createElement("option");e.isdst&&(t.dataset.dst=!0),e.text==timezoneText&&(t.selected=!0,e.isdst&&(daylightSavingIcon.style.opacity=1)),t.value=e.offset,t.innerText=e.text,selectTimezone.append(t)}))}const time_zone_offset="Time_Zone_Offset",time_zone_text="Time_Zone_Text";function saveTimezone(e){localStorage.setItem(time_zone_offset,JSON.stringify(timeOffset)),localStorage.setItem(time_zone_text,JSON.stringify(e))}function loadTimezone(){let e=JSON.parse(localStorage.getItem(time_zone_offset))||"+00:00";timeOffset=e;let t=JSON.parse(localStorage.getItem(time_zone_text))||"(UTC) Coordinated Universal Time";timezoneText=t}applyButton.addEventListener("click",setTimezone),twelveHourFormat.addEventListener("click",setFormat),twentyFourHourFormat.addEventListener("click",setFormat),document.addEventListener("DOMContentLoaded",()=>{loadTimezone(),loadTimezoneOptions(),setTime()}),setInterval(setTime,1e3);